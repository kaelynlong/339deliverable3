<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">
    <title>Athlete Profile - Amir Abston</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>

    <header>
        <a href="index.html" class="nav-home-button" tabindex="1">HOME</a>
        <form action="#" method="get" class="search-form">
            <label for="search-input" class="sr-only">Search Athlete</label>
            <input type="text" id="search-input" placeholder="Search Athlete" name="q" tabindex="2">
            <button type="submit" aria-label="Search" tabindex="3"><i class="fas fa-search"></i></button>
        </form>
    </header>

    <main>
        <section class="profile-header" tabindex="4">
            <div class="profile-details-container">
                <div class="profile-picture">
                    <img src="images/pfpdefault.png" alt="Profile picture of Amir Abston">
                </div>
                <div class="profile-details">
                    <h1 class="athlete-name">Amir Abston</h1>
                    <div class="athlete-details">
                        <p>More information coming soon.</p>
                    </div>
                    <p>12th Grade, Ann Arbor Skyline</p>
                    <button class="photos-button" tabindex="5">Photos</button>
                </div>
            </div>
        </section>

        <section class="season-info-container flex-container" tabindex="6">
            <div class="season-records season-box">
                <h2>Season Records
                    <i class="fas fa-chart-line season-icon"></i>
                </h2>
                <table>
<tr>
<th>Year</th>
<th>Grade</th>
<th>Time</th>
</tr>
<tr>
<td>2024</td>
<td>12</td>
<td>25:25.0PR</td>
</tr>
</table>

            </div>
            <div class="graph-box">
                <h2>Performance Bar
                    <i class="fas fa-tachometer-alt performance-icon"></i>
                </h2>
                <div class="performance-graph-container">
                    
                    <div class="progress-container" tabindex="7">
                        <div class="progress-bar" data-progress="57.638888888888886">
                            <span class="progress-label">2024 - 25:25.0PR</span>
                        </div>
                    </div>
                    
                </div>
            </div>
        </section>

        <section class="meet-year season-box full-width">
            <h2>All Races
                <button id="toggle-races" aria-expanded="true" aria-label="Toggle All Races" tabindex="8">
                    <i class="fas fa-chevron-down"></i>
                </button>
            </h2>
            <div id="races-table" class="table-wrapper" tabindex="9"><table>
<tr>
<th>Place</th>
<th>Time</th>
<th>Date</th>
<th>Meet</th>
<th>Comments</th>
</tr>
</table>
</div>
        </section>
    </main>

    <footer>
        <p>Created by Kaelyn Lin for SI 339</p>
        <a href="#top" tabindex="10">Back to top</a>
    </footer>

    <div class="fab-container">
        <button id="fab-main" class="fab" aria-label="Information" tabindex="11"><i class="fas fa-info-circle"></i></button>
        <div id="fab-options" class="fab-options">
            <button id="dark-mode-toggle" class="fab fab-small" aria-label="Toggle Dark Mode" tabindex="12"><i class="fas fa-moon"></i></button>
            <button id="motion-toggle" class="fab fab-small" aria-label="Toggle Reduced Motion" tabindex="13"><i class="fas fa-walking"></i></button>
            <button id="contrast-toggle" class="fab fab-small" aria-label="Toggle High Contrast" tabindex="14"><i class="fas fa-adjust"></i></button>
        </div>
    </div>

    <script>
        document.getElementById('toggle-races').addEventListener('click', function() {
            const racesTable = document.getElementById('races-table');
            const icon = this.querySelector('i');
            const isVisible = racesTable.style.display !== 'none';
            racesTable.style.display = isVisible ? 'none' : 'block';
            this.setAttribute('aria-expanded', !isVisible);
            icon.classList.toggle('fa-chevron-down', isVisible);
            icon.classList.toggle('fa-chevron-up', !isVisible);
        });

        document.addEventListener('DOMContentLoaded', function() {
            const progressBars = document.querySelectorAll('.progress-bar');

            progressBars.forEach(bar => {
                const progressValue = bar.getAttribute('data-progress');
                console.log("Progress Value for bar: ", progressValue);
                setTimeout(() => {
                    if (progressValue) {
                        bar.style.width = progressValue + '%';
                    }
                }, 200);  // Delay by 200ms for a smooth effect
            });
        });

        document.addEventListener('DOMContentLoaded', function() {
            const body = document.body;

            // FAB expand/collapse logic
            const fabMain = document.getElementById('fab-main');
            const fabContainer = document.querySelector('.fab-container'); // Select the fab-container
            const fabOptions = document.getElementById('fab-options');
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            const motionToggle = document.getElementById('motion-toggle');
            const contrastToggle = document.getElementById('contrast-toggle');

            fabMain.addEventListener('click', () => {
                fabContainer.classList.toggle('fab-active');
            });

            // Manual Dark Mode Toggle
            darkModeToggle.addEventListener('click', () => {
                body.classList.toggle('dark-mode');
            });

            // Manual Reduced Motion Toggle
            motionToggle.addEventListener('click', () => {
                body.classList.toggle('reduced-motion');
            });

            // Manual High Contrast Toggle
            contrastToggle.addEventListener('click', () => {
                body.classList.toggle('high-contrast');
            });
        });

        // Function to simulate hover on mobile devices using touch events
        document.addEventListener('DOMContentLoaded', function () {
            const athleteNames = document.querySelectorAll('.athlete-name');
            athleteNames.forEach(name => {
                name.addEventListener('touchstart', function () {
                    const details = this.nextElementSibling;
                    if (details.style.maxHeight) {
                        details.style.maxHeight = null;
                        details.style.opacity = 0;
                    } else {
                        details.style.maxHeight = details.scrollHeight + "px";
                        details.style.opacity = 1;
                    }
                });
            });
        });
    </script>
</body>
</html>