<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">
    <title>Athlete Profile - Enshu Kuan</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>

    <header>
        <a href="index.html" class="nav-home-button" tabindex="1">HOME</a>
        <form action="#" method="get" class="search-form">
            <label for="search-input" class="sr-only">Search Athlete</label>
            <input type="text" id="search-input" placeholder="Search Athlete" name="q" tabindex="2">
            <button type="submit" aria-label="Search" tabindex="3"><i class="fas fa-search"></i></button>
        </form>
    </header>

    <main>
        <section class="profile-header" tabindex="4">
            <div class="profile-details-container">
                <div class="profile-picture">
                    <img src="images/pfpdefault.png" alt="Profile picture of Enshu Kuan">
                </div>
                <div class="profile-details">
                    <h1 class="athlete-name">Enshu Kuan</h1>
                    <div class="athlete-details">
                        <p>More information coming soon.</p>
                    </div>
                    <p>9th Grade, Ann Arbor Skyline</p>
                    <button class="photos-button" tabindex="5">Photos</button>
                </div>
            </div>
        </section>

        <section class="season-info-container flex-container" tabindex="6">
            <div class="season-records season-box">
                <h2>Season Records
                    <i class="fas fa-chart-line season-icon"></i>
                </h2>
                <table>
<tr>
<th>Year</th>
<th>Grade</th>
<th>Time</th>
</tr>
<tr>
<td>2023</td>
<td>9</td>
<td>17:20.8PR</td>
</tr>
<tr>
<td>2024</td>
<td>10</td>
<td>17:44.4</td>
</tr>
</table>

            </div>
            <div class="graph-box">
                <h2>Performance Bar
                    <i class="fas fa-tachometer-alt performance-icon"></i>
                </h2>
                <div class="performance-graph-container">
                    
                    <div class="progress-container" tabindex="7">
                        <div class="progress-bar" data-progress="71.08888888888889">
                            <span class="progress-label">2023 - 17:20.8PR</span>
                        </div>
                    </div>
                    
                    <div class="progress-container" tabindex="7">
                        <div class="progress-bar" data-progress="70.43333333333332">
                            <span class="progress-label">2024 - 17:44.4</span>
                        </div>
                    </div>
                    
                </div>
            </div>
        </section>

        <section class="meet-year season-box full-width">
            <h2>All Races
                <button id="toggle-races" aria-expanded="true" aria-label="Toggle All Races" tabindex="8">
                    <i class="fas fa-chevron-down"></i>
                </button>
            </h2>
            <div id="races-table" class="table-wrapper" tabindex="9"><table>
<tr>
<th>Place</th>
<th>Time</th>
<th>Date</th>
<th>Meet</th>
<th>Comments</th>
</tr>
<tr>
<td>3 </td>
<td>18:13.2</td>
<td>Sep 7</td>
<td>Bret Clements Bath Invitational (J.V.)</td>
<td></td>
</tr>
<tr>
<td>32 </td>
<td>17:52.6</td>
<td>Sep 10</td>
<td>SEC Jamboree #1 (Varsity)</td>
<td>Your speed was impressive, but next time, try not to leave the spectators in the dust... literally!</td>
</tr>
<tr>
<td>63 </td>
<td>17:44.4 SR</td>
<td>Sep 14</td>
<td>56th Holly-Duane Raffin Festival of Races (D1 Boys)</td>
<td>Nice job! You really finished strong.</td>
</tr>
<tr>
<td>16 </td>
<td>19:00.5</td>
<td>Sep 9</td>
<td>Bret Clements Bath Invitational (J.V.)</td>
<td></td>
</tr>
<tr>
<td>94 </td>
<td>19:11.2</td>
<td>Sep 13</td>
<td>SEC-HS Jamboree 1 (Red/White Varsity Boys)</td>
<td>Great effort out there! Keep pushing yourself at the next meet.</td>
</tr>
<tr>
<td>110 </td>
<td>18:45.6</td>
<td>Sep 16</td>
<td>55th Holly/Duane Raffin Festival of Races (D1 Boys)</td>
<td>Are you sure you're not part cheetah? That was fast!</td>
</tr>
<tr>
<td>8 </td>
<td>17:53.0</td>
<td>Sep 27</td>
<td>SEC Jamboree 2 (Red) (Reserve Wave 1 (<21:00))</td>
<td>I think you might've outrun the course map! Keep it up, and weâ€™ll need GPS tracking.</td>
</tr>
<tr>
<td>205 </td>
<td>17:57.6</td>
<td>Oct 7</td>
<td>2023 Portage XC Invitational (Division 1)</td>
<td></td>
</tr>
<tr>
<td>83 </td>
<td>18:55.8</td>
<td>Oct 14</td>
<td>39th Fr Gabriel Richard Cross Country Invite (Varsity Large School)</td>
<td>Great run! If only we could bottle that energy for Monday mornings.</td>
</tr>
<tr>
<td>8 </td>
<td>17:52.3</td>
<td>Oct 28</td>
<td>Post Regional Open Meet (PROM) - Springfiled Oaks</td>
<td>That was a great race! Next time, try running *on* the path though.</td>
</tr>
</table>
</div>
        </section>
    </main>

    <footer>
        <p>Created by Kaelyn Lin for SI 339</p>
        <a href="#top" tabindex="10">Back to top</a>
    </footer>

    <div class="fab-container">
        <button id="fab-main" class="fab" aria-label="Information" tabindex="11"><i class="fas fa-info-circle"></i></button>
        <div id="fab-options" class="fab-options">
            <button id="dark-mode-toggle" class="fab fab-small" aria-label="Toggle Dark Mode" tabindex="12"><i class="fas fa-moon"></i></button>
            <button id="motion-toggle" class="fab fab-small" aria-label="Toggle Reduced Motion" tabindex="13"><i class="fas fa-walking"></i></button>
            <button id="contrast-toggle" class="fab fab-small" aria-label="Toggle High Contrast" tabindex="14"><i class="fas fa-adjust"></i></button>
        </div>
    </div>

    <script>
        document.getElementById('toggle-races').addEventListener('click', function() {
            const racesTable = document.getElementById('races-table');
            const icon = this.querySelector('i');
            const isVisible = racesTable.style.display !== 'none';
            racesTable.style.display = isVisible ? 'none' : 'block';
            this.setAttribute('aria-expanded', !isVisible);
            icon.classList.toggle('fa-chevron-down', isVisible);
            icon.classList.toggle('fa-chevron-up', !isVisible);
        });

        document.addEventListener('DOMContentLoaded', function() {
            const progressBars = document.querySelectorAll('.progress-bar');

            progressBars.forEach(bar => {
                const progressValue = bar.getAttribute('data-progress');
                console.log("Progress Value for bar: ", progressValue);
                setTimeout(() => {
                    if (progressValue) {
                        bar.style.width = progressValue + '%';
                    }
                }, 200);  // Delay by 200ms for a smooth effect
            });
        });

        document.addEventListener('DOMContentLoaded', function() {
            const body = document.body;

            // FAB expand/collapse logic
            const fabMain = document.getElementById('fab-main');
            const fabContainer = document.querySelector('.fab-container'); // Select the fab-container
            const fabOptions = document.getElementById('fab-options');
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            const motionToggle = document.getElementById('motion-toggle');
            const contrastToggle = document.getElementById('contrast-toggle');

            fabMain.addEventListener('click', () => {
                fabContainer.classList.toggle('fab-active');
            });

            // Manual Dark Mode Toggle
            darkModeToggle.addEventListener('click', () => {
                body.classList.toggle('dark-mode');
            });

            // Manual Reduced Motion Toggle
            motionToggle.addEventListener('click', () => {
                body.classList.toggle('reduced-motion');
            });

            // Manual High Contrast Toggle
            contrastToggle.addEventListener('click', () => {
                body.classList.toggle('high-contrast');
            });
        });

        // Function to simulate hover on mobile devices using touch events
        document.addEventListener('DOMContentLoaded', function () {
            const athleteNames = document.querySelectorAll('.athlete-name');
            athleteNames.forEach(name => {
                name.addEventListener('touchstart', function () {
                    const details = this.nextElementSibling;
                    if (details.style.maxHeight) {
                        details.style.maxHeight = null;
                        details.style.opacity = 0;
                    } else {
                        details.style.maxHeight = details.scrollHeight + "px";
                        details.style.opacity = 1;
                    }
                });
            });
        });
        // Function to replace athlete image with default
        document.addEventListener('DOMContentLoaded', function () {
            const profileImg = document.querySelector('.profile-picture img');

            profileImg.addEventListener('error', function () {
                this.src = 'images/pfpdefault.png';
            });
        });
    </script>
</body>
</html>